<div id="todo_lists" class="space-y-6">
  <%# Iterate through priority windows in order %>
  <% [:today, :tomorrow, :this_week, :next_week].each_with_index do |window, index| %>
    <% todos = active_todos_grouped[window.to_s] || [] %>
    <% z_index = 4 - index %> <%# Decreasing z-index: today=4, tomorrow=3, this_week=2, next_week=1 %>

    <%# Always show all windows (even if empty) %>
    <div id="<%= window %>_list_container" class="priority-window-section relative" style="z-index: <%= z_index %>;">
      <%= render "todos/priority_window", window: window, todos: todos %>
    </div>
  <% end %>

  <%# Archived Section %>
  <div class="rounded-3xl border border-white/30 bg-white/70 p-6 shadow-lg backdrop-blur">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold text-slate-900">Archived</h2>
      <%= render "todos/archived_count", count: archived_todos.count %>
    </div>
    <%= render "todos/list_container", section: :archived, todos: archived_todos %>
  </div>
</div>

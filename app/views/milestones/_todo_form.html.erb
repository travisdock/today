<div id="milestone_todo_form">
  <%= form_with model: todo, url: project_milestone_todos_path(project, milestone), class: "space-y-3" do |form| %>
    <div class="flex flex-col gap-3 sm:flex-row">
      <%= form.text_field :title,
            required: true,
            placeholder: "Add a todo to this milestone...",
            class: "w-full flex-1 rounded-2xl border border-slate-300/80 bg-white px-4 py-3 text-base text-slate-900 placeholder:text-slate-400 focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-400/30" %>
      <%= form.select :priority_window,
            Todo.priority_windows.keys.map { |w| [w.titleize, w] },
            {},
            {
              required: true,
              style: "background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\"); background-position: right 0.75rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em;",
              class: "appearance-none rounded-2xl border border-slate-300/80 bg-white pl-4 pr-10 py-3 text-base text-slate-900 focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-400/30"
            } %>
      <%= form.submit "Add",
            class: "rounded-2xl bg-blue-600 px-5 py-3 text-sm font-semibold uppercase tracking-wide text-white shadow-md transition hover:-translate-y-0.5 hover:bg-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-400/40" %>
    </div>

    <% if todo.errors.any? %>
      <ul class="space-y-1 text-sm text-red-600">
        <% todo.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    <% end %>
  <% end %>
</div>
